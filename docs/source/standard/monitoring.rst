.. include:: defs.hrst

.. _Monitoring:

Monitoring
==========

Schema
------

:id:
   string, autogenerated

:tender_id:
   string

:monitoring_id:
   string, auto-generated, read-only

   The Monitoring identifier to refer tender to in "paper" documentation.

:status:
   string

   :`draft`:
      Draft monitoring
   :`active`:
      Active monitoring
   :`addressed`:
      Violations found monitoring
   :`declined`:
      Violations not found monitoring
   :`completed`:
      Completed monitoring (violations found)
   :`closed`:
      Completed monitoring (no violations found)
   :`cancelled`:
      Archived monitoring
   :`stopped`:
      Stopped monitoring

   Status of the Monitoring.

:reasons:
   list of strings

   https://github.com/ProzorroUKR/standards/tree/master/monitoring/reasons

   :`indicator`:
      Automatic risks indicators
   :`authorities`:
      Information received from state authorities, bodies of local self-government, on the presence of signs of violation of legislation in the field of public procurement
   :`media`:
      Messages in mass media containing information on the presence of signs of violation of legislation in the field of public procurement
   :`fiscal`:
      A sign of violation of legislation in the field of public procurement detected by the body of state financial control in information disclosure in the electronic procurement system
   :`public`:
      Information received from public associations about the presence of signs of violations of legislation in the field of public procurement revealed by the results of public control in the field of public procurement

:procuringStages:
   list of strings

   https://github.com/ProzorroUKR/standards/tree/master/monitoring/procuring_stages

   :`planning`:
      Planning of tender and publication of information on its conduct
   :`awarding`:
      Disclosure of tender offers, their consideration and evaluation
   :`contracting`:
      Conclusion and completion of a tender contract

:monitoringPeriod:
   :ref:`period`, autogenerated

:eliminationPeriod:
   :ref:`period`, autogenerated

:dateModified:
   string, :ref:`date`, autogenerated

   |ocdsDescription|
   Date that the document was last modified

:dateCreated:
   string, :ref:`date`, autogenerated

:endDate:
   string, :ref:`date`, autogenerated

:decision:
   :ref:`decision`

:conclusion:
   :ref:`conclusion`

:cancellation:
   :ref:`cancellation`



Monitor workflow
----------------

.. graphviz::

    digraph G {
        rankdir = LR

        draft_desc [
            label = "Monitoring\n created manually\n or automatically by\n risk indicator."
            style = filled
            color = transparent
            fixedsize = true
            height = 1
            width = 1.5
        ]

        cancelled_desc [
            label = "Monitoring\n cancelled.\n Terminal status."
            style = filled
            color = transparent
            fixedsize = true
            height = 1
            width = 1.5
        ]

        active_desc [
            label = "Decision\n published.\n Monitoring\n started."
            style = filled
            color = transparent
            fixedsize = true
            height = 1
            width = 1.5
        ]

        addressed_desc [
            label = "Conclusion\n published.\n Violations\n occurred."
            style = filled
            color = transparent
            fixedsize = true
            height = 1
            width = 1.5
        ]

        declined_desc [
            label = "Conclusion\n published.\n No violations\n occurred."
            style = filled
            color = transparent
            fixedsize = true
            height = 1
            width = 1.5
        ]

        stopped_desc [
            label = "Monitoring\n stopped.\n Terminal status."
            style = filled
            color = transparent
            fixedsize = true
            height = 1
            width = 1.5
        ]

        completed_desc [
            label = "Resolution and\n report published.\n Monitoring\n finished.\n Terminal status."
            style = filled
            color = transparent
            fixedsize = true
            height = 1
            width = 1.5
        ]

        closed_desc [
            label = "Monitoring\n finished with\n no violations\n occurred.\n Terminal status."
            style = filled
            color = transparent
            fixedsize = true
            height = 1
            width = 1.5
        ]

        draft [
            label = "draft*"
            shape = circle
            fixedsize = true
            width = .9
        ]
        active [
            shape = circle
            fixedsize = true
            width = .9
        ]
        stopped [
            shape = circle
            fixedsize = true
            width = .9
        ]
        addressed [
            shape = circle
            fixedsize = true
            width = .9
        ]
        completed [
            shape = circle
            fixedsize = true
            width = .9
        ]
        declined [
            shape = circle
            fixedsize = true
            width = .9
        ]
        closed [
            shape = circle
            fixedsize = true
            width = .9
        ]
        cancelled [
            shape = circle
            fixedsize = true
            width = .9
        ]

        draft -> active
        active -> addressed
        addressed -> completed
        active -> declined
        declined -> closed
        addressed -> stopped
        declined -> stopped
        active -> stopped
        draft -> cancelled [
            constraint = false
        ]

        decision_object [
            label = "Decision"
            shape = rect
            style = filled
            fillcolor = pink
            fixedsize = true
            height = .25
            width = 1.5
        ]
        dialogue_object [
            label = "Dialogue"
            shape = rect
            style = filled
            fillcolor = moccasin
            fixedsize = true
            height = .25
            width = 1.5
        ]
        single_addressed_dialogue_object [
            label = "Dialogue (Single)"
            shape = rect
            style = filled
            fillcolor = plum
            fixedsize = true
            height = .25
            width = 1.5
        ]
        single_declined_dialogue_object [
            label = "Dialogue (Single)"
            shape = rect
            style = filled
            fillcolor = mediumaquamarine
            fixedsize = true
            height = .25
            width = 1.5
        ]
        conclusion_object [
            label = "Conclusion"
            shape = rect
            style = filled
            fillcolor = moccasin
            fixedsize = true
            height = .25
            width = 1.5
        ]
        report_object [
            label = "Report"
            shape = rect
            style = filled
            fillcolor = plum
            fixedsize = true
            height = .25
            width = 1.5
        ]
        resolution_object [
            label = "Resolution"
            shape = rect
            style = filled
            fillcolor = plum
            fixedsize = true
            height = .25
            width = 1.5
        ]
        cancellation_active_object [
            label = "Cancellation"
            shape = rect
            style = filled
            fillcolor = lightblue
            fixedsize = true
            height = .25
            width = 1.5
        ]
        cancellation_addressed_object [
            label = "Cancellation"
            shape = rect
            style = filled
            fillcolor = lightblue
            fixedsize = true
            height = .25
            width = 1.5
        ]
        cancellation_declined_object [
            label = "Cancellation"
            shape = rect
            style = filled
            fillcolor = lightblue
            fixedsize = true
            height = .25
            width = 1.5
        ]
        cancellation_draft_object [
            label = "Cancellation"
            shape = rect
            style = filled
            fillcolor = lightsalmon
            fixedsize = true
            height = .25
            width = 1.5
        ]

        subgraph cluster_draft {
            style = filled
            color = plum
            draft_desc
            draft
            decision_object
            cancellation_draft_object
        }
        subgraph cluster_cancelled {
            style = filled
            color = lightsalmon
            cancelled_desc
            cancelled
        }
        subgraph cluster_active {
            style = filled
            color = pink
            active_desc
            active
            dialogue_object
            conclusion_object
            cancellation_active_object
        }
        subgraph cluster_addressed {
            style = filled
            color = moccasin
            addressed_desc
            addressed
            single_addressed_dialogue_object
            report_object
            resolution_object
            cancellation_addressed_object
        }
        subgraph cluster_declined {
            style = filled
            color = moccasin
            declined_desc
            declined
            single_declined_dialogue_object
            cancellation_declined_object
        }
        subgraph cluster_stopped {
            style = filled
            color = lightblue
            stopped_desc
            stopped
        }
        subgraph cluster_completed {
            style = filled
            color = plum
            completed_desc
            completed
        }
        subgraph cluster_closed {
            style = filled
            color = mediumaquamarine
            closed_desc
            closed
        }
    }

\* marks initial state
